<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="core. - Выбор тарифа" />
    <title>Выбор тарифа - core.</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preload" href="css/tariff.css" as="style" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800;900&family=Caveat:wght@700&display=swap"
    />
    <link rel="icon" href="favicon.png" type="image/png" />
    <link rel="stylesheet" href="css/index.css" />

    <!-- Скрипт Т-Банка -->
    <script src="https://securepay.tinkoff.ru/html/payForm/js/tinkoff_v2.js"></script>

    <style>
      /* Твои стили без изменений */
      .tariff-price {
        font-size: 2.8rem;
        font-weight: 900;
        margin-top: 5px;
        color: var(--black);
        display: flex;
        align-items: baseline;
        justify-content: center;
      }
      .tariff-price span {
        font-size: 1.5rem;
        font-weight: 600;
        margin-left: 5px;
        color: var(--gray-dark);
      }
      button.btn-tariff {
        border: none;
        cursor: pointer;
        width: 100%;
        font-family: inherit;
        font-size: 1rem;
        /* Немного приподнимаем кнопку, чтобы она точно была кликабельной */
        position: relative;
        z-index: 10;
      }
      .old-price {
        text-decoration: line-through;
        color: #a0a0a0;
        font-size: 1.2rem;
        display: block;
        margin-bottom: -5px;
        font-weight: 500;
        text-align: center;
      }
      .mentor .old-price {
        color: rgba(255, 255, 255, 0.5);
      }
      .mentor .tariff-price {
        color: white;
      }
    </style>
  </head>

  <body>
    <!-- pointer-events: none; ОБЯЗАТЕЛЬНО, чтобы шум не блокировал клики -->
    <canvas id="noise-canvas" style="pointer-events: none"></canvas>

    <nav class="navbar">
      <a href="index.html" class="nav-logo" aria-label="core. home">core.</a>
    </nav>

    <main
      style="
        padding-top: 100px;
        padding-bottom: 60px;
        min-height: 80vh;
        display: flex;
        align-items: center;
      "
    >
      <section class="new-section" id="tariffs" style="width: 100%; padding: 0">
        <div
          class="section-subtitle-small reveal"
          style="text-align: center; margin-bottom: 10px"
        >
          финальный этап
        </div>
        <h2 class="section-title-center reveal" style="margin-bottom: 50px">
          Ты в одном шаге от системы.
        </h2>

        <div class="tariffs-grid stagger-container">
          <!-- ТАРИФ 1 -->
          <div class="tariff-card stagger-item">
            <div class="t-header-box">
              <div class="t-header-title">Тариф</div>
              <div class="t-header-name">core.</div>
            </div>
            <div class="t-section">
              <h3 class="t-section-title">Содержание:</h3>
              <ul class="t-list">
                <li>Модуль 1. Креативность</li>
                <li>Модуль 2. Съемка</li>
                <li>Модуль 3. Монтаж</li>
                <li>Модуль 4. Первые деньги</li>
                <li class="crossed">Модуль 5. Контент-продюсирование</li>
                <li class="crossed">Модуль 6. Личный бренд</li>
              </ul>
            </div>
            <hr class="t-divider" />
            <div class="t-section" style="flex-grow: 1">
              <h3 class="t-section-title">Что внутри?</h3>
              <ul class="t-list-icons">
                <li>
                  <div class="icon-circle">
                    <svg viewBox="0 0 24 24">
                      <polygon
                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                      ></polygon>
                    </svg>
                  </div>
                  <span>Доступ к материалам 12 месяцев</span>
                </li>
                <li>
                  <div class="icon-circle">
                    <svg viewBox="0 0 24 24">
                      <polygon
                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                      ></polygon>
                    </svg>
                  </div>
                  <span>Общий чат учеников</span>
                </li>
                <li>
                  <div class="icon-circle">
                    <svg viewBox="0 0 24 24">
                      <polygon
                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                      ></polygon>
                    </svg>
                  </div>
                  <span>Поддержка от кураторов </span>
                </li>
                <li>
                  <div class="icon-circle">
                    <svg viewBox="0 0 24 24">
                      <polygon
                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                      ></polygon>
                    </svg>
                  </div>
                  <span>Проверка домашних заданий</span>
                </li>
                <li class="crossed">
                  <div class="icon-circle">
                    <svg viewBox="0 0 24 24">
                      <polygon
                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                      ></polygon>
                    </svg>
                  </div>
                  <span>Эфиры с разборов участников</span>
                </li>
                <li class="crossed">
                  <div class="icon-circle">
                    <svg viewBox="0 0 24 24">
                      <polygon
                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                      ></polygon>
                    </svg>
                  </div>
                  <span>Алгоритм на 100.000₽/мес</span>
                </li>
              </ul>
            </div>
            <div class="price-block" style="margin-bottom: 20px">
              <span class="old-price">39 900 ₽</span>
              <div class="tariff-price">19 900<span>₽</span></div>
            </div>
            <button
              class="btn-tariff"
              onclick="payTinkoff(19900, 'Тариф core.')"
            >
              <span class="btn-arrow">&gt;</span> Оплатить 19 900 ₽
            </button>
          </div>

          <!-- ТАРИФ 2 -->
          <div class="tariff-card popular stagger-item">
            <div class="t-header-box">
              <div class="t-header-title">Тариф</div>
              <div class="t-header-name">core+</div>
              <div class="tariff-badge">Самый популярный</div>
            </div>
            <div class="t-section">
              <h3 class="t-section-title">Содержание:</h3>
              <ul class="t-list">
                <li>Модуль 1. Креативность</li>
                <li>Модуль 2. Съемка</li>
                <li>Модуль 3. Монтаж</li>
                <li>Модуль 4. Первые деньги</li>
                <li>Модуль 5. Контент-продюсирование</li>
                <li>Модуль 6. Личный бренд</li>
              </ul>
            </div>
            <hr class="t-divider" />
            <div class="t-section" style="flex-grow: 1">
              <h3 class="t-section-title">Что внутри?</h3>
              <ul class="t-list-icons">
                <li>
                  <div class="icon-circle">
                    <svg viewBox="0 0 24 24">
                      <polygon
                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                      ></polygon>
                    </svg>
                  </div>
                  <span>Доступ к материалам 12 месяцев</span>
                </li>
                <li>
                  <div class="icon-circle">
                    <svg viewBox="0 0 24 24">
                      <polygon
                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                      ></polygon>
                    </svg>
                  </div>
                  <span>Общий чат учеников</span>
                </li>
                <li>
                  <div class="icon-circle">
                    <svg viewBox="0 0 24 24">
                      <polygon
                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                      ></polygon>
                    </svg>
                  </div>
                  <span>Поддержка от кураторов</span>
                </li>
                <li>
                  <div class="icon-circle">
                    <svg viewBox="0 0 24 24">
                      <polygon
                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                      ></polygon>
                    </svg>
                  </div>
                  <span>Проверка домашних заданий</span>
                </li>
                <li>
                  <div class="icon-circle">
                    <svg viewBox="0 0 24 24">
                      <polygon
                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                      ></polygon>
                    </svg>
                  </div>
                  <span>Эфиры с разборов участников</span>
                </li>
                <li>
                  <div class="icon-circle">
                    <svg viewBox="0 0 24 24">
                      <polygon
                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                      ></polygon>
                    </svg>
                  </div>
                  <span>Алгоритм на 100.000₽/мес</span>
                </li>
              </ul>
            </div>
            <div class="price-block" style="margin-bottom: 20px">
              <span class="old-price" style="color: rgba(255, 255, 255, 0.5)"
                >59 900 ₽</span
              >
              <div class="tariff-price" style="color: white">
                29 900 <span>₽</span>
              </div>
            </div>
            <button
              class="btn-tariff"
              onclick="payTinkoff(29900, 'Тариф core+')"
            >
              <span class="btn-arrow">&gt;</span> Оплатить 29 900 ₽
            </button>
          </div>

          <!-- ТАРИФ 3 -->
          <div class="tariff-card mentor stagger-item">
            <div class="t-header-box">
              <div class="t-header-title">Тариф</div>
              <div class="t-header-name">Менторство</div>
              <div
                class="tariff-badge"
                style="background: white; color: var(--blue-bright)"
              >
                Места ограничены
              </div>
            </div>
            <div class="t-section">
              <h3 class="t-section-title">Содержание:</h3>
              <ul class="t-list">
                <li>Личная работа 2 месяца</li>
                <li>Работа до результата</li>
                <li>от 10 личных созвонов</li>
                <li>Гарантия трудоустройства в мое агентство</li>
              </ul>
            </div>
            <hr class="t-divider" />
            <div class="t-section" style="flex-grow: 1">
              <h3 class="t-section-title">Что внутри?</h3>
              <ul class="t-list-icons">
                <li>
                  <div class="icon-circle">
                    <svg viewBox="0 0 24 24">
                      <polygon
                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                      ></polygon>
                    </svg>
                  </div>
                  <span>Вечный доступ ко всем курсам </span>
                </li>
                <li>
                  <div class="icon-circle">
                    <svg viewBox="0 0 24 24">
                      <polygon
                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                      ></polygon>
                    </svg>
                  </div>
                  <span>Вечный доступ к моей личке</span>
                </li>
                <li>
                  <div class="icon-circle">
                    <svg viewBox="0 0 24 24">
                      <polygon
                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                      ></polygon>
                    </svg>
                  </div>
                  <span>Работаем до результата</span>
                </li>
              </ul>
            </div>
            <div class="price-block" style="margin-bottom: 20px">
              <span class="old-price">180 000 ₽</span>
              <div class="tariff-price" style="color: white">
                95 000 <span style="color: rgba(255, 255, 255, 0.7)">₽</span>
              </div>
            </div>
            <button
              class="btn-tariff"
              onclick="payTinkoff(95000, 'Тариф Менторство')"
            >
              <span class="btn-arrow">&gt;</span> Оплатить 95 000 ₽
            </button>
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer reveal">
      <div class="footer-content">
        <div class="footer-col">
          <a
            href="index.html"
            class="nav-logo"
            style="color: white; font-size: 2rem"
            aria-label="core. home"
            >core.</a
          >
          <p style="margin-top: 10px; max-width: 300px">
            Система создания контента и заработка на творчестве.
          </p>
        </div>
        <div class="footer-col footer-links">
          <h3>Документы</h3>
          <a href="/oferta">Договор оферты</a>
          <a href="/argement">Обработка персональных данных</a>
          <a href="/privacy">Политика конфиденциальности</a>
        </div>
        <div class="footer-col">
          <h3>Реквизиты</h3>
          <p style="margin: 0; line-height: 1.6">
            ИП ЛИ Р.С.<br />ИНН 502760562039
          </p>
        </div>
      </div>
      <div class="footer-legal"><span>© 2026 All rights reserved.</span></div>
    </footer>

    <script>
      // ЛОГИКА ОПЛАТЫ Т-БАНК
      function payTinkoff(amount, name) {
        console.log("Попытка вызвать оплату. Тариф:", name, "Сумма:", amount);

        // Проверка на блокировку скрипта
        if (
          typeof tinkoff === "undefined" ||
          typeof tinkoff.pay !== "function"
        ) {
          alert(
            "Скрипт оплаты временно недоступен. Если у вас включен VPN или блокировщик рекламы, пожалуйста, отключите их и обновите страницу.",
          );
          return;
        }

        const orderId = "core_" + Date.now();

        try {
          tinkoff.pay({
            terminalkey: "1771969236568",
            frame: "true",
            language: "ru",
            amount: amount,
            order: orderId,
            description: name,
          });
        } catch (e) {
          console.error("Ошибка при вызове окна оплаты:", e);
          alert(
            "Произошла ошибка при открытии окна оплаты. Попробуйте обновить страницу.",
          );
        }
      }

      // --- 1. ШУМ НА ФОНЕ (ОРИГИНАЛ + СУПЕР-ОПТИМИЗАЦИЯ СДВИГОМ) ---
      const noiseCanvas = document.getElementById("noise-canvas");
      if (noiseCanvas) {
        const ctx = noiseCanvas.getContext("2d", { alpha: true });
        let pattern;
        const patternSize = 256; // Размер базового квадрата шума

        const resize = () => {
          noiseCanvas.width = window.innerWidth;
          noiseCanvas.height = window.innerHeight;
        };

        window.addEventListener("resize", resize);
        resize();

        // Создаем кусочек шума ОДИН РАЗ, используя ТВОЙ ОРИГИНАЛЬНЫЙ КОД
        const createPattern = () => {
          const tile = document.createElement("canvas");
          tile.width = patternSize;
          tile.height = patternSize;
          const tCtx = tile.getContext("2d");
          const id = tCtx.createImageData(patternSize, patternSize);
          const buffer = new Uint32Array(id.data.buffer);

          // Твои оригинальные цвета и плотность!
          for (let i = 0; i < buffer.length; i++) {
            if (Math.random() < 0.2) {
              buffer[i] = Math.random() < 0.5 ? 0xff000000 : 0x11000000;
            }
          }

          tCtx.putImageData(id, 0, 0);
          pattern = ctx.createPattern(tile, "repeat");
        };

        createPattern();

        const loopNoise = () => {
          // Случайный сдвиг паттерна каждый кадр (создает иллюзию нового шума)
          const xOff = Math.floor(Math.random() * patternSize);
          const yOff = Math.floor(Math.random() * patternSize);

          ctx.clearRect(0, 0, noiseCanvas.width, noiseCanvas.height);
          ctx.fillStyle = pattern;

          // Сдвигаем начало координат и рисуем холст с запасом
          ctx.translate(-xOff, -yOff);
          ctx.fillRect(
            0,
            0,
            noiseCanvas.width + patternSize,
            noiseCanvas.height + patternSize,
          );
          ctx.setTransform(1, 0, 0, 1, 0, 0); // Возвращаем обратно

          // 15 FPS - работает плавно, батарею не садит
          setTimeout(() => requestAnimationFrame(loopNoise), 1000 / 15);
        };

        loopNoise();
      }

      // Анимация при скролле (reveal)
      document.addEventListener("DOMContentLoaded", () => {
        const revealObserver = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting)
                entry.target.classList.add("reveal-active");
            });
          },
          { threshold: 0.1 },
        );

        document
          .querySelectorAll(".reveal, .stagger-item")
          .forEach((el) => revealObserver.observe(el));
      });
    </script>
  </body>
</html>
